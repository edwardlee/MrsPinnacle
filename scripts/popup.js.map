{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/popup.js","src/scripts/utils/ext.js","src/scripts/utils/storage.js"],"names":[],"mappings":"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","file":"popup.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import ext from \"./utils/ext\";\nimport storage from \"./utils/storage\";\n\nvar popup = document.getElementById(\"app\");\nstorage.get('color', function(resp) {\n  var color = resp.color;\n  if(color) {\n    popup.style.backgroundColor = color\n  }\n});\n\nvar template = (data) => {\n  var json = JSON.stringify(data);\n  return (`\n  <div class=\"site-description\">\n    <h3 class=\"title\">${data.title}</h3>\n    <p class=\"description\">${data.description}</p>\n    <a href=\"${data.url}\" target=\"_blank\" class=\"url\">${data.url}</a>\n  </div>\n  <div class=\"action-container\">\n    <button data-bookmark='${json}' id=\"save-btn\" class=\"btn btn-primary\">Save</button>\n  </div>\n  `);\n}\nvar renderMessage = (message) => {\n  var displayContainer = document.getElementById(\"display-container\");\n  displayContainer.innerHTML = `<p class='message'>${message}</p>`;\n}\n\nvar renderBookmark = (data) => {\n  var displayContainer = document.getElementById(\"display-container\")\n  if(data) {\n    var tmpl = template(data);\n    displayContainer.innerHTML = tmpl;  \n  } else {\n    renderMessage(\"Sorry, could not extract this page's title and URL\")\n  }\n}\n\next.tabs.query({active: true, currentWindow: true}, function(tabs) {\n  var activeTab = tabs[0];\n  chrome.tabs.sendMessage(activeTab.id, { action: 'process-page' }, renderBookmark);\n});\n\npopup.addEventListener(\"click\", function(e) {\n  if(e.target && e.target.matches(\"#save-btn\")) {\n    e.preventDefault();\n    var data = e.target.getAttribute(\"data-bookmark\");\n    ext.runtime.sendMessage({ action: \"perform-save\", data: data }, function(response) {\n      if(response && response.action === \"saved\") {\n        renderMessage(\"Your bookmark was saved successfully!\");\n      } else {\n        renderMessage(\"Sorry, there was an error while saving your bookmark.\");\n      }\n    })\n  }\n});\n\nvar optionsLink = document.querySelector(\".js-options\");\noptionsLink.addEventListener(\"click\", function(e) {\n  e.preventDefault();\n  ext.tabs.create({'url': ext.extension.getURL('options.html')});\n})\n","const apis = [\n  'alarms',\n  'bookmarks',\n  'browserAction',\n  'commands',\n  'contextMenus',\n  'cookies',\n  'downloads',\n  'events',\n  'extension',\n  'extensionTypes',\n  'history',\n  'i18n',\n  'idle',\n  'notifications',\n  'pageAction',\n  'runtime',\n  'storage',\n  'tabs',\n  'webNavigation',\n  'webRequest',\n  'windows',\n]\n\nfunction Extension () {\n  const _this = this\n\n  apis.forEach(function (api) {\n\n    _this[api] = null\n\n    try {\n      if (chrome[api]) {\n        _this[api] = chrome[api]\n      }\n    } catch (e) {}\n\n    try {\n      if (window[api]) {\n        _this[api] = window[api]\n      }\n    } catch (e) {}\n\n    try {\n      if (browser[api]) {\n        _this[api] = browser[api]\n      }\n    } catch (e) {}\n    try {\n      _this.api = browser.extension[api]\n    } catch (e) {}\n  })\n\n  try {\n    if (browser && browser.runtime) {\n      this.runtime = browser.runtime\n    }\n  } catch (e) {}\n\n  try {\n    if (browser && browser.browserAction) {\n      this.browserAction = browser.browserAction\n    }\n  } catch (e) {}\n\n}\n\nmodule.exports = new Extension();","import ext from \"./ext\";\n\nmodule.exports = (ext.storage.sync ? ext.storage.sync : ext.storage.local);"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9wb3B1cC5qcyIsInNyYy9zY3JpcHRzL3V0aWxzL2V4dC5qcyIsInNyYy9zY3JpcHRzL3V0aWxzL3N0b3JhZ2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBOztBQUNBOzs7O0FBRUEsSUFBSSxLQUFLLEdBQUcsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsS0FBeEIsQ0FBWjs7QUFDQSxvQkFBUSxHQUFSLENBQVksT0FBWixFQUFxQixVQUFTLElBQVQsRUFBZTtBQUNsQyxNQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBakI7O0FBQ0EsTUFBRyxLQUFILEVBQVU7QUFDUixJQUFBLEtBQUssQ0FBQyxLQUFOLENBQVksZUFBWixHQUE4QixLQUE5QjtBQUNEO0FBQ0YsQ0FMRDs7QUFPQSxJQUFJLFFBQVEsR0FBRyxTQUFYLFFBQVcsQ0FBQyxJQUFELEVBQVU7QUFDdkIsTUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQUwsQ0FBZSxJQUFmLENBQVg7QUFDQSxpRkFFc0IsSUFBSSxDQUFDLEtBRjNCLGlEQUcyQixJQUFJLENBQUMsV0FIaEMsaUNBSWEsSUFBSSxDQUFDLEdBSmxCLGdEQUlzRCxJQUFJLENBQUMsR0FKM0QsNEZBTzJCLElBUDNCO0FBVUQsQ0FaRDs7QUFhQSxJQUFJLGFBQWEsR0FBRyxTQUFoQixhQUFnQixDQUFDLE9BQUQsRUFBYTtBQUMvQixNQUFJLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLG1CQUF4QixDQUF2QjtBQUNBLEVBQUEsZ0JBQWdCLENBQUMsU0FBakIsZ0NBQW1ELE9BQW5EO0FBQ0QsQ0FIRDs7QUFLQSxJQUFJLGNBQWMsR0FBRyxTQUFqQixjQUFpQixDQUFDLElBQUQsRUFBVTtBQUM3QixNQUFJLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLG1CQUF4QixDQUF2Qjs7QUFDQSxNQUFHLElB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QUFPLENBQVAsRUFBVSxDQUFFOztBQUVkLFFBQUk7QUFDRixVQUFJLE9BQU8sQ0FBQyxHQUFELENBQVgsRUFBa0I7QUFDaEIsUUFBQSxLQUFLLENBQUMsR0FBRCxDQUFMLEdBQWEsT0FBTyxDQUFDLEdBQUQsQ0FBcEI7QUFDRDtBQUNGLEtBSkQsQ0FJRSxPQUFPLENBQVAsRUFBVSxDQUFFOztBQUNkLFFBQUk7QUFDRixNQUFBLEtBQUssQ0FBQyxHQUFOLEdBQVksT0FBTyxDQUFDLFNBQVIsQ0FBa0IsR0FBbEIsQ0FBWjtBQUNELEtBRkQsQ0FFRSxPQUFPLENBQVAsRUFBVSxDQUFFO0FBQ2YsR0F4QkQ7O0FBMEJBLE1BQUk7QUFDRixRQUFJLE9BQU8sSUFBSSxPQUFPLENBQUMsT0FBdkIsRUFBZ0M7QUFDOUIsV0FBSyxPQUFMLEdBQWUsT0FBTyxDQUFDLE9BQXZCO0FBQ0Q7QUFDRixHQUpELENBSUUsT0FBTyxDQUFQLEVBQVUsQ0FBRTs7QUFFZCxNQUFJO0FBQ0YsUUFBSSxPQUFPLElBQUksT0FBTyxDQUFDLGFBQXZCLEVBQXNDO0FBQ3BDLFdBQUssYUFBTCxHQUFxQixPQUFPLENBQUMsYUFBN0I7QUFDRDtBQUNGLEdBSkQsQ0FJRSxPQUFPLENBQVAsRUFBVSxDQUFFO0FBRWY7O0FBRUQsTUFBTSxDQUFDLE9BQVAsR0FBaUIsSUFBSSxTQUFKLEVBQWpCOzs7OztBQ25FQTs7OztBQUVBLE1BQU0sQ0FBQyxPQUFQLEdBQWtCLGdCQUFJLE9BQUosQ0FBWSxJQUFaLEdBQW1CLGdCQUFJLE9BQUosQ0FBWSxJQUEvQixHQUFzQyxnQkFBSSxPQUFKLENBQVksS0FBcEUiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJpbXBvcnQgZXh0IGZyb20gXCIuL3V0aWxzL2V4dFwiO1xuaW1wb3J0IHN0b3JhZ2UgZnJvbSBcIi4vdXRpbHMvc3RvcmFnZVwiO1xuXG52YXIgcG9wdXAgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKTtcbnN0b3JhZ2UuZ2V0KCdjb2xvcicsIGZ1bmN0aW9uKHJlc3ApIHtcbiAgdmFyIGNvbG9yID0gcmVzcC5jb2xvcjtcbiAgaWYoY29sb3IpIHtcbiAgICBwb3B1cC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclxuICB9XG59KTtcblxudmFyIHRlbXBsYXRlID0gKGRhdGEpID0+IHtcbiAgdmFyIGpzb24gPSBKU09OLnN0cmluZ2lmeShkYXRhKTtcbiAgcmV0dXJuIChgXG4gIDxkaXYgY2xhc3M9XCJzaXRlLWRlc2NyaXB0aW9uXCI+XG4gICAgPGgzIGNsYXNzPVwidGl0bGVcIj4ke2RhdGEudGl0bGV9PC9oMz5cbiAgICA8cCBjbGFzcz1cImRlc2NyaXB0aW9uXCI+JHtkYXRhLmRlc2NyaXB0aW9ufTwvcD5cbiAgICA8YSBocmVmPVwiJHtkYXRhLnVybH1cIiB0YXJnZXQ9XCJfYmxhbmtcIiBjbGFzcz1cInVybFwiPiR7ZGF0YS51cmx9PC9hPlxuICA8L2Rpdj5cbiAgPGRpdiBjbGFzcz1cImFjdGlvbi1jb250YWluZXJcIj5cbiAgICA8YnV0dG9uIGRhdGEtYm9va21hcms9JyR7anNvbn0nIGlkPVwic2F2ZS1idG5cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiPlNhdmU8L2J1dHRvbj5cbiAgPC9kaXY+XG4gIGApO1xufVxudmFyIHJlbmRlck1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xuICB2YXIgZGlzcGxheUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGlzcGxheS1jb250YWluZXJcIik7XG4gIGRpc3BsYXlDb250YWluZXIuaW5uZXJIVE1MID0gYDxwIGNsYXNzPSdtZXNzYWdlJz4ke21lc3NhZ2V9PC9wPmA7XG59XG5cbnZhciByZW5kZXJCb29rbWFyayA9IChkYXRhKSA9PiB7XG4gIHZhciBkaXNwbGF5Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkaXNwbGF5LWNvbnRhaW5lclwiKVxuICBpZihkYXRhKSB7XG4gICAgdmFyIHRtcGwgPSB0ZW1wbGF0ZShkYXRhKTtcbiAgICBkaXNwbGF5Q29udGFpbmVyLmlubmVySFRNTCA9IHRtcGw7ICBcbiAgfSBlbHNlIHtcbiAgICByZW5kZXJNZXNzYWdlKFwiU29ycnksIGNvdWxkIG5vdCBleHRyYWN0IHRoaXMgcGFnZSdzIHRpdGxlIGFuZCBVUkxcIilcbiAgfVxufVxuXG5leHQudGFicy5xdWVyeSh7YWN0aXZlOiB0cnVlLCBjdXJyZW50V2luZG93OiB0cnVlfSwgZnVuY3Rpb24odGFicykge1xuICB2YXIgYWN0aXZlVGFiID0gdGFic1swXTtcbiAgY2hyb21lLnRhYnMuc2VuZE1lc3NhZ2UoYWN0aXZlVGFiLmlkLCB7IGFjdGlvbjogJ3Byb2Nlc3MtcGFnZScgfSwgcmVuZGVyQm9va21hcmspO1xufSk7XG5cbnBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XG4gIGlmKGUudGFyZ2V0ICYmIGUudGFyZ2V0Lm1hdGNoZXMoXCIjc2F2ZS1idG5cIikpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIGRhdGEgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWJvb2ttYXJrXCIpO1xuICAgIGV4dC5ydW50aW1lLnNlbmRNZXNzYWdlKHsgYWN0aW9uOiBcInBlcmZvcm0tc2F2ZVwiLCBkYXRhOiBkYXRhIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICBpZihyZXNwb25zZSAmJiByZXNwb25zZS5hY3Rpb24gPT09IFwic2F2ZWRcIikge1xuICAgICAgICByZW5kZXJNZXNzYWdlKFwiWW91ciBib29rbWFyayB3YXMgc2F2ZWQgc3VjY2Vzc2Z1bGx5IVwiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlbmRlck1lc3NhZ2UoXCJTb3JyeSwgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHNhdmluZyB5b3VyIGJvb2ttYXJrLlwiKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG59KTtcblxudmFyIG9wdGlvbnNMaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy1vcHRpb25zXCIpO1xub3B0aW9uc0xpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcbiAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICBleHQudGFicy5jcmVhdGUoeyd1cmwnOiBleHQuZXh0ZW5zaW9uLmdldFVSTCgnb3B0aW9ucy5odG1sJyl9KTtcbn0pXG4iLCJjb25zdCBhcGlzID0gW1xuICAnYWxhcm1zJyxcbiAgJ2Jvb2ttYXJrcycsXG4gICdicm93c2VyQWN0aW9uJyxcbiAgJ2NvbW1hbmRzJyxcbiAgJ2NvbnRleHRNZW51cycsXG4gICdjb29raWVzJyxcbiAgJ2Rvd25sb2FkcycsXG4gICdldmVudHMnLFxuICAnZXh0ZW5zaW9uJyxcbiAgJ2V4dGVuc2lvblR5cGVzJyxcbiAgJ2hpc3RvcnknLFxuICAnaTE4bicsXG4gICdpZGxlJyxcbiAgJ25vdGlmaWNhdGlvbnMnLFxuICAncGFnZUFjdGlvbicsXG4gICdydW50aW1lJyxcbiAgJ3N0b3JhZ2UnLFxuICAndGFicycsXG4gICd3ZWJOYXZpZ2F0aW9uJyxcbiAgJ3dlYlJlcXVlc3QnLFxuICAnd2luZG93cycsXG5dXG5cbmZ1bmN0aW9uIEV4dGVuc2lvbiAoKSB7XG4gIGNvbnN0IF90aGlzID0gdGhpc1xuXG4gIGFwaXMuZm9yRWFjaChmdW5jdGlvbiAoYXBpKSB7XG5cbiAgICBfdGhpc1thcGldID0gbnVsbFxuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChjaHJvbWVbYXBpXSkge1xuICAgICAgICBfdGhpc1thcGldID0gY2hyb21lW2FwaV1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmICh3aW5kb3dbYXBpXSkge1xuICAgICAgICBfdGhpc1thcGldID0gd2luZG93W2FwaV1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChicm93c2VyW2FwaV0pIHtcbiAgICAgICAgX3RoaXNbYXBpXSA9IGJyb3dzZXJbYXBpXVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgdHJ5IHtcbiAgICAgIF90aGlzLmFwaSA9IGJyb3dzZXIuZXh0ZW5zaW9uW2FwaV1cbiAgICB9IGNhdGNoIChlKSB7fVxuICB9KVxuXG4gIHRyeSB7XG4gICAgaWYgKGJyb3dzZXIgJiYgYnJvd3Nlci5ydW50aW1lKSB7XG4gICAgICB0aGlzLnJ1bnRpbWUgPSBicm93c2VyLnJ1bnRpbWVcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHt9XG5cbiAgdHJ5IHtcbiAgICBpZiAoYnJvd3NlciAmJiBicm93c2VyLmJyb3dzZXJBY3Rpb24pIHtcbiAgICAgIHRoaXMuYnJvd3NlckFjdGlvbiA9IGJyb3dzZXIuYnJvd3NlckFjdGlvblxuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBFeHRlbnNpb24oKTsiLCJpbXBvcnQgZXh0IGZyb20gXCIuL2V4dFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IChleHQuc3RvcmFnZS5zeW5jID8gZXh0LnN0b3JhZ2Uuc3luYyA6IGV4dC5zdG9yYWdlLmxvY2FsKTsiXX0="}